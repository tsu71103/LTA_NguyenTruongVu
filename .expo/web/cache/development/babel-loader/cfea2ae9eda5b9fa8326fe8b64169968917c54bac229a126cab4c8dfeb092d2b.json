{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction ProductDetail(_ref) {\n  var route = _ref.route;\n  var navigation = useNavigation();\n  var _route$params = route.params,\n    name = _route$params.name,\n    url = _route$params.url,\n    price = _route$params.price;\n  var _useState = useState(1),\n    _useState2 = _slicedToArray(_useState, 2),\n    count = _useState2[0],\n    setCount = _useState2[1];\n  var addToCart = function addToCart() {\n    global.mycart = global.mycart || [];\n    var existingItemIndex = global.mycart.findIndex(function (item) {\n      return item.name === name;\n    });\n    if (existingItemIndex !== -1) {\n      global.mycart[existingItemIndex].quantity += count;\n    } else {\n      var newItem = {\n        name: name,\n        url: url,\n        price: price,\n        quantity: count,\n        image: url\n      };\n      global.mycart.push(newItem);\n    }\n    setCount(1);\n    console.log(\"Cart after adding item:\", global.mycart);\n  };\n  var increaseQuantity = function increaseQuantity() {\n    setCount(count + 1);\n  };\n  var decreaseQuantity = function decreaseQuantity() {\n    if (count > 1) {\n      setCount(count - 1);\n    }\n  };\n  var goToCart = function goToCart() {\n    navigation.navigate(\"Cart\", {\n      addedItems: global.mycart\n    });\n  };\n  return _jsxs(ScrollView, {\n    children: [_jsxs(View, {\n      style: {\n        flex: 30,\n        borderWidth: 2,\n        borderRadius: 10,\n        marginHorizontal: 10\n      },\n      children: [_jsx(Image, {\n        source: {\n          uri: url\n        },\n        style: {\n          height: 200,\n          width: \"100%\",\n          resizeMode: \"center\"\n        }\n      }), _jsxs(Text, {\n        children: [\"Name: \", name]\n      }), _jsxs(Text, {\n        children: [\"Price: $\", price]\n      })]\n    }), _jsxs(View, {\n      style: {\n        flexDirection: 'row',\n        justifyContent: 'space-around',\n        marginVertical: 10\n      },\n      children: [_jsx(Button, {\n        title: \"-\",\n        onPress: decreaseQuantity\n      }), _jsx(Text, {\n        children: count\n      })]\n    }), _jsxs(View, {\n      children: [_jsx(TouchableOpacity, {\n        onPress: addToCart,\n        style: {\n          backgroundColor: \"blue\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          borderWidth: 2,\n          borderRadius: 15,\n          height: 20,\n          marginHorizontal: 50,\n          marginVertical: 10\n        },\n        children: _jsx(Text, {\n          style: {\n            color: \"white\"\n          },\n          children: \"Add to cart\"\n        })\n      }), _jsxs(TouchableOpacity, {\n        onPress: goToCart,\n        style: {\n          backgroundColor: \"red\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          borderWidth: 2,\n          borderRadius: 15,\n          height: 20,\n          marginHorizontal: 50,\n          marginVertical: 10\n        },\n        children: [\" \", _jsx(Text, {\n          style: {\n            color: \"white\"\n          },\n          children: \"Xem gi\\u1ECF h\\xE0ng\"\n        })]\n      })]\n    })]\n  });\n}\nexport default ProductDetail;","map":{"version":3,"names":["React","useState","View","Text","Image","ScrollView","TouchableOpacity","useNavigation","jsx","_jsx","jsxs","_jsxs","ProductDetail","_ref","route","navigation","_route$params","params","name","url","price","_useState","_useState2","_slicedToArray","count","setCount","addToCart","global","mycart","existingItemIndex","findIndex","item","quantity","newItem","image","push","console","log","increaseQuantity","decreaseQuantity","goToCart","navigate","addedItems","children","style","flex","borderWidth","borderRadius","marginHorizontal","source","uri","height","width","resizeMode","flexDirection","justifyContent","marginVertical","Button","title","onPress","backgroundColor","alignItems","color"],"sources":["C:/DiaD/HocHanh/ReactNative/Example03/component/ProductDetail.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { View, Text, Image, ScrollView, TouchableOpacity } from \"react-native\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nfunction ProductDetail({ route }) {\n  const navigation = useNavigation();\n  const { name, url, price } = route.params;\n  const [count, setCount] = useState(1);\n\n  const addToCart = () => {\n    global.mycart = global.mycart || [];\n\n    // Kiểm tra xem sản phẩm đã có trong giỏ hàng chưa\n    const existingItemIndex = global.mycart.findIndex(\n      (item) => item.name === name\n    );\n\n    if (existingItemIndex !== -1) {\n      // Nếu có, tăng quantity lên 1\n      global.mycart[existingItemIndex].quantity += count;\n    } else {\n      // Nếu không, thêm sản phẩm mới vào giỏ hàng\n      const newItem = {\n        name,\n        url,\n        price,\n        quantity: count,\n        image: url,\n      };\n      global.mycart.push(newItem);\n    }\n\n    setCount(1);\n    console.log(\"Cart after adding item:\", global.mycart);\n  };\n\n  const increaseQuantity = () => {\n    setCount(count + 1);\n  };\n\n  const decreaseQuantity = () => {\n    // Đảm bảo số lượng không bao giờ âm\n    if (count > 1) {\n      setCount(count - 1);\n    }\n  };\n\n  const goToCart = () => {\n    navigation.navigate(\"Cart\", { addedItems: global.mycart });\n  };\n\n  return (\n    <ScrollView>\n      <View\n        style={{\n          flex: 30,\n          borderWidth: 2,\n          borderRadius: 10,\n          marginHorizontal: 10,\n        }}\n      >\n        <Image\n          source={{ uri: url }}\n          style={{ height: 200, width: \"100%\", resizeMode: \"center\" }}\n        />\n        <Text>Name: {name}</Text>\n        <Text>Price: ${price}</Text>\n      </View>\n      <View style={{ flexDirection: 'row', justifyContent: 'space-around', marginVertical: 10 }}>\n          <Button title=\"-\" onPress={decreaseQuantity} />\n          <Text>{count}</Text>\n         \n        </View>\n\n      <View>\n      \n        <TouchableOpacity\n          onPress={addToCart}\n          style={{\n            backgroundColor: \"blue\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            borderWidth: 2,\n            borderRadius: 15,\n            height: 20,\n            marginHorizontal: 50,\n            marginVertical: 10,\n          }}\n        >\n          <Text style={{ color: \"white\" }}>Add to cart</Text>\n        </TouchableOpacity>\n        <TouchableOpacity\n          onPress={goToCart}\n          style={{\n            backgroundColor: \"red\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            borderWidth: 2,\n            borderRadius: 15,\n            height: 20,\n            marginHorizontal: 50,\n            marginVertical: 10,\n          }}\n        >\n          {\" \"}\n          <Text style={{ color: \"white\" }}>Xem giỏ hàng</Text>\n        </TouchableOpacity>\n      </View>\n    </ScrollView>\n  );\n}\n\nexport default ProductDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}